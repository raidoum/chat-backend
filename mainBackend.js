#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const authStack_1 = require("./lib/authStack");
const fileStorageStack_1 = require("./lib/fileStorageStack");
const databaseStack_1 = require("./lib/databaseStack");
const apiStack_1 = require("./lib/apiStack");
const app = new cdk.App();
const databaseStack = new databaseStack_1.DatabaseStack(app, 'DatabaseStack', {});
const authStack = new authStack_1.AuthStack(app, 'AuthStack', {
    stage: 'dev',
    hasCognitoGroups: true,
    groupNames: ['admin'],
    userpoolConstructName: 'ChatUserPool',
    identitypoolConstructName: 'ChatIdentityPool',
    userTable: databaseStack.userTable,
});
const fileStorageStack = new fileStorageStack_1.FileStorageStack(app, 'FileStorageStack', {
    authenticatedRole: authStack.authenticatedRole,
    unauthenticatedRole: authStack.unauthenticatedRole,
    allowedOrigins: ['http://localhost:3000'],
});
const apiStack = new apiStack_1.APIStack(app, 'AppSyncAPIStack', {
    userpool: authStack.userpool,
    roomTable: databaseStack.roomTable,
    messageTable: databaseStack.messageTable,
    userTable: databaseStack.userTable,
    unauthenticatedRole: authStack.unauthenticatedRole,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbkJhY2tlbmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtYWluQmFja2VuZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSx1Q0FBb0M7QUFDcEMsbUNBQWtDO0FBQ2xDLCtDQUEyQztBQUMzQyw2REFBeUQ7QUFDekQsdURBQW1EO0FBQ25ELDZDQUF5QztBQUV6QyxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUV6QixNQUFNLGFBQWEsR0FBRyxJQUFJLDZCQUFhLENBQUMsR0FBRyxFQUFFLGVBQWUsRUFBRSxFQUFFLENBQUMsQ0FBQTtBQUVqRSxNQUFNLFNBQVMsR0FBRyxJQUFJLHFCQUFTLENBQUMsR0FBRyxFQUFFLFdBQVcsRUFBRTtJQUNqRCxLQUFLLEVBQUUsS0FBSztJQUNaLGdCQUFnQixFQUFFLElBQUk7SUFDdEIsVUFBVSxFQUFFLENBQUMsT0FBTyxDQUFDO0lBQ3JCLHFCQUFxQixFQUFFLGNBQWM7SUFDckMseUJBQXlCLEVBQUUsa0JBQWtCO0lBQzdDLFNBQVMsRUFBRSxhQUFhLENBQUMsU0FBUztDQUNsQyxDQUFDLENBQUE7QUFFRixNQUFNLGdCQUFnQixHQUFHLElBQUksbUNBQWdCLENBQUMsR0FBRyxFQUFFLGtCQUFrQixFQUFFO0lBQ3RFLGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxpQkFBaUI7SUFDOUMsbUJBQW1CLEVBQUUsU0FBUyxDQUFDLG1CQUFtQjtJQUNsRCxjQUFjLEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQztDQUN6QyxDQUFDLENBQUE7QUFFRixNQUFNLFFBQVEsR0FBRyxJQUFJLG1CQUFRLENBQUMsR0FBRyxFQUFFLGlCQUFpQixFQUFFO0lBQ3JELFFBQVEsRUFBRSxTQUFTLENBQUMsUUFBUTtJQUM1QixTQUFTLEVBQUUsYUFBYSxDQUFDLFNBQVM7SUFDbEMsWUFBWSxFQUFFLGFBQWEsQ0FBQyxZQUFZO0lBQ3hDLFNBQVMsRUFBRSxhQUFhLENBQUMsU0FBUztJQUNsQyxtQkFBbUIsRUFBRSxTQUFTLENBQUMsbUJBQW1CO0NBQ2xELENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcbmltcG9ydCAnc291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyJ1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJ1xuaW1wb3J0IHsgQXV0aFN0YWNrIH0gZnJvbSAnLi9saWIvYXV0aFN0YWNrJ1xuaW1wb3J0IHsgRmlsZVN0b3JhZ2VTdGFjayB9IGZyb20gJy4vbGliL2ZpbGVTdG9yYWdlU3RhY2snXG5pbXBvcnQgeyBEYXRhYmFzZVN0YWNrIH0gZnJvbSAnLi9saWIvZGF0YWJhc2VTdGFjaydcbmltcG9ydCB7IEFQSVN0YWNrIH0gZnJvbSAnLi9saWIvYXBpU3RhY2snXG5cbmNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKClcblxuY29uc3QgZGF0YWJhc2VTdGFjayA9IG5ldyBEYXRhYmFzZVN0YWNrKGFwcCwgJ0RhdGFiYXNlU3RhY2snLCB7fSlcblxuY29uc3QgYXV0aFN0YWNrID0gbmV3IEF1dGhTdGFjayhhcHAsICdBdXRoU3RhY2snLCB7XG5cdHN0YWdlOiAnZGV2Jyxcblx0aGFzQ29nbml0b0dyb3VwczogdHJ1ZSxcblx0Z3JvdXBOYW1lczogWydhZG1pbiddLFxuXHR1c2VycG9vbENvbnN0cnVjdE5hbWU6ICdDaGF0VXNlclBvb2wnLFxuXHRpZGVudGl0eXBvb2xDb25zdHJ1Y3ROYW1lOiAnQ2hhdElkZW50aXR5UG9vbCcsXG5cdHVzZXJUYWJsZTogZGF0YWJhc2VTdGFjay51c2VyVGFibGUsXG59KVxuXG5jb25zdCBmaWxlU3RvcmFnZVN0YWNrID0gbmV3IEZpbGVTdG9yYWdlU3RhY2soYXBwLCAnRmlsZVN0b3JhZ2VTdGFjaycsIHtcblx0YXV0aGVudGljYXRlZFJvbGU6IGF1dGhTdGFjay5hdXRoZW50aWNhdGVkUm9sZSxcblx0dW5hdXRoZW50aWNhdGVkUm9sZTogYXV0aFN0YWNrLnVuYXV0aGVudGljYXRlZFJvbGUsXG5cdGFsbG93ZWRPcmlnaW5zOiBbJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCddLFxufSlcblxuY29uc3QgYXBpU3RhY2sgPSBuZXcgQVBJU3RhY2soYXBwLCAnQXBwU3luY0FQSVN0YWNrJywge1xuXHR1c2VycG9vbDogYXV0aFN0YWNrLnVzZXJwb29sLFxuXHRyb29tVGFibGU6IGRhdGFiYXNlU3RhY2sucm9vbVRhYmxlLFxuXHRtZXNzYWdlVGFibGU6IGRhdGFiYXNlU3RhY2subWVzc2FnZVRhYmxlLFxuXHR1c2VyVGFibGU6IGRhdGFiYXNlU3RhY2sudXNlclRhYmxlLFxuXHR1bmF1dGhlbnRpY2F0ZWRSb2xlOiBhdXRoU3RhY2sudW5hdXRoZW50aWNhdGVkUm9sZSxcbn0pXG4iXX0=